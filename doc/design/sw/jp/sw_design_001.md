# TestResultManager

## 目的

TestResutlManagerは、ソフトウェアテストのテスト項目/ケース/データの管理、および実施結果の管理を容易にするためのツールである。

## 概要

TestResultManagerを用いることで、ソフトウェア開発でのテストの実施～結果のまとめ、およびまとめに必要な情報の管理を自動化することで、この手順にかかる工数を短縮する。  
また、テスト結果のまとめ(テストレポート)の生成を自動化することで、作業担当者による成果物の品質の統一を目指す。

## 画面遷移

TestResultManagerは、CUIアプリケーションとする。  
(ただし、将来的にはGUIに対応する。)

## 機能要件

TestResultManagerが提供する機能は、以下の通り。

1. テスト結果管理機能  
	テスト結果をデータベースに登録する、またはテストに関係する情報を管理する機能を提供する。  
	ここで「管理する」とは、以下の操作を可能とすることを指す。
	* 情報の登録
	* 情報の削除
	* 情報の更新

	管理する情報は、以下となる。  
	* 対象製品
	* 対象機能
		* 機能名
		* 関数名
		* etc...
	* テストレベル
	* テストID  
		* 概要
		* 詳細  
			* テストの実施手順、入力、期待値。
	* 実施対象テストID
	* 実行バージョン
	* 実行結果
		* OK/NG
	* 実行結果コード
	* 実行日
	* テスト実行者  
1. テスト結果出力機能  
	データベースに登録されたテスト結果に基づいて、テスト結果を出力する機能。  
	出力可能なフォーマットは、以下。
	* HTML  
		* デフォルトの出力形式
		* WEBベース、ファイル出力の両方を可能とする。
		* テストの集計情報、個別情報を表示する。
		* 別フォーマットへの出力は、HTMLから行う。  
		指定可能な別フォーマットは、以下の通り。
			* Excel
				* シートの構成は、別途検討。  
				カスタマイズ可能にする？
1. システム方式  
	TestResultManagerは、以下の構成とする。
	1. ハードウェア  
		PC1台(ローカルPC)
	1. ソフトウェア構成
		* OS  
			Windows
		* ミドルウェア  
			* データベース  
				SQLite
1. 機能設計
	1. DBテーブル
		1. テーブル一覧
			1. products  
			製品情報テーブル
			1. functions  
			対象機能テーブル
			1. test_levels  
			テストレベルテーブル
			1. mst_test_cases  
			全テストケース一覧
			1. test_cases  
			実施対象としているテストケースのテーブル
			1. test_versions
			テスト実行時のバージョン情報  
			バージョン管理システムのリビジョン番号でも可
			1. test_result_codes
			実行結果の文字列
			1. testers
			テスト実行者テーブル  
			テスト実行者の所属(企業、部署)および名前を管理する。
			1. test_results  
			テストの実行結果
		1. CRUD図

			|                        |products|functoins|test_levels|mst_test_cases|test_cases|test_versions|test_result_codes|testers|test_results|
			|------------------------|--------|---------|-----------|--------------|----------|-------------|-----------------|-------|------------|
			|対象製品管理機能        |CRUD    |         |           |              |          |             |                 |       |            |
			|対象機能管理機能        |        |CRUD     |           |              |          |             |                 |       |            |
			|テストレベル機能        |        |         |CRUD       |              |          |             |                 |       |            |
			|テストID管理機能        |        |         |           |CRUD          |UD        |             |                 |       |            |
			|実施対象テストID管理機能|        |         |           |  U           |CRUD      |             |                 |       |            |
			|実行バージョン管理機能  |        |         |           |              |          |CRUD         |                 |       |C           |
			|実行結果管理機能        |        |         |           |              |          |             |                 |       |CRUD        |
			|実行結果コード管理機能  |        |         |           |              |          |             |CRUD             |       |            |
			|実行日管理機能          |        |         |           |              |          |             |                 |       |CR          |
			|テスト実行者管理機能  　|        |         |           |              |          |             |                 |CRUD   |  U         |
	1. 外部インターフェース設計  
	TestResultManagerは、CUIアプリケーションの集合である。  
	各アプリケーションの名称と機能を示す。
		* Product
			* 対象製品管理機能を提供する。
			* 実行時のインターフェースは、以下の通り。  
				```c
				Product (cmd) (製品名) (製品名2)
				```  
				* cmd  
				実行する処理に対応するコマンドを指定する。  
				指定可能な子コマンドは、以下の通り。
					* --set  
					「製品名」を、productsテーブルに追加する。
					* --get  
					productsテーブルのレコード一覧を取得する。
					* --update  
					「製品名」の名前を「製品名2」に変更する。
					* --delete  
					「製品名」を、productsテーブルから削除する。
		* Functions
			* 対象機能管理を提供する。
			* 実行時のインターフェースは、Productsと同様とする。  
			ただし、アクセス先のテーブルはproductsテーブルとする。
		* TestLevels
			* テストレベル機能管理を提供する。
			* 実行時のインターフェースは、Productsと同様とする。  
			ただし、アクセス先のテーブルはproductsテーブルとする。
		* TestIDs
			* テストID管理機能を提供する。
			* 実行時のインターフェースは、以下の通り。  
				```c
				Product (cmd) (ファイルパス)
				```  
				* cmd  
				実行する処理に対応するコマンドを指定する。  
				指定可能な子コマンドは、以下の通り。
					* --set  
					「ファイルパス」で特定されるファイルからテストケース情報を読み出して、mst_test_casesテーブルに追加する。  
					読み出す情報は、以下とする。  
						* テストID
						* テスト概要
						* テスト詳細  
							* 手順、入力、期待値
					* --get  
					mst_test_casesテーブルからテスト情報を取得し、「ファイルパス」で特定されるファイルに書き込む。
					* --update  
					「ファイルパス」で特定されるファイルからテストケース情報を読み出して、mst_test_casesテーブルの該当するテスト項目を更新する。
					* --delete  
					「ファイルパス」で特定されるファイルからテストケース情報を読み出して、mst_test_casesテーブルの該当するテスト項目を削除する。  
					また、test_casesテーブルに該当するテスト項目が登録されていた場合には、test_casesテーブルからもテスト項目を削除する。
		* TestCases
			* 実施対象としているテストケース管理機能を提供する。
			* 実行時のインターフェースは、TestIDsと同一とする。  
			ただし、アクセス先のテーブルは、一部機能を除き、test_casesテーブルとする。
			また、一部のコマンドに対して機能を変更する。  
			対象のコマンドの機能の内容は、以下の通り。  
				* --update  
				「ファイルパス」で特定されるファイルからテストケース情報を読み出してmst_test_casesテーブルの該当するテスト項目を更新する。
		* TestVersion
			* 実行バージョン管理機能を提供する。
			* 実行時のインターフェースは、以下の通り。  
				```c
				TestVersion (cmd) (登録バージョン) (前バージョン)
				```  
				* cmd  
				実行する処理に対応するコマンドを指定する。  
				指定可能な子コマンドは、以下の通り。
					* --set  
					「登録バージョン」で指定されたバージョン情報を、test_versionsテーブルに登録する。
					「前バージョン」が指定されていた場合には、test_resultsテーブルから該当するテストケースを取得し、結果をクリア、かつ実施バージョンを「登録バージョン」に変更してtest_resultsテーブルに登録する。  
					このとき、「前バージョン」のテスト結果情報は保持する(削除しない)。
					* --get  
					test_versionsテーブルから、テスト対象バージョン情報を取得する。
					mst_test_casesテーブルからテスト情報を取得し、「ファイルパス」で特定されるファイルに書き込む。
					* --update  
					「登録バージョン」で指定されたバージョンの「前バージョン」を、指定された「前バージョン」に更新する。
					* --delete  
					「登録バージョン」で指定されたバージョン情報を、test_versionsテーブルから削除する。
